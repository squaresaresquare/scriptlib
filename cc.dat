#Risk Assessment
tested="Yes"                     # Yes or No
incrementally="Yes"              # Yes or No
primary_golden_signal="Yes"      # Yes or No
canary_golden_signal="https://box.wavefront.com/u/1RT9Kw25T8?t=box"
five_min_rollback="No"           # Yes or No
have_tier_1_golden_signal="Yes"  # Yes or No
tier_1_golden_signal="https://box.wavefront.com/u/94hmZH01T0?t=box"
read -r description << EndOfText
Upgrade cluster apps-europe-west2-prod-01 and nodepools to 1.25.16-gke.1360000
EndOfText 

#Details
summary="Upgrade cluster apps-europe-west2-prod-01 and nodepools to 1.25.16-gke.1360000"
components="Kubernetes"
type="Change Control"
priority="Critical"
project="PAAS"
parent="PAAS-15158"

#fields
read -r deployment_plan << EndOfText
Run the [cluster validation pipeline|https://jenkins-k8ssre.dev.box.net/job/Cluster%20Automations/job/Cluster%20Validation/job/master/]
Run the update command for the cluster
{noformat}gcloud container clusters upgrade apps-europe-west2-prod-01 --cluster-version=1.25.16-gke.1360000 --master --region=europe-west2 --project=box-prod-skynet-europe-west2 --quiet
{noformat}

Run the [cluster validation pipeline|https://jenkins-k8ssre.dev.box.net/job/Cluster%20Automations/job/Cluster%20Validation/job/master/] again

Run the nodepool upgrade commands
{noformat}
gcloud container clusters upgrade apps-europe-west2-prod-01 --cluster-version=1.25.16-gke.1360000 --node-pool=n2d64m180d100-v1-a --region=europe-west2 --project=box-prod-skynet-europe-west2 --quiet
{noformat}
EndOfText
#Details
summary="Upgrade cluster apps-europe-west2-prod-01 and nodepools to 1.25.16-gke.1360000"
components="Kubernetes"
type="Change Control"
priority="Critical"
project="PAAS"
parent="PAAS-15158"

#fields
read -d '\n' deployment_plan << EndOfText
Run the [cluster validation pipeline|https://jenkins-k8ssre.dev.box.net/job/Cluster%20Automations/job/Cluster%20Validation/job/master/]
Run the update command for the cluster
{noformat}gcloud container clusters upgrade apps-europe-west2-prod-01 --cluster-version=1.25.16-gke.1360000 --master --region=europe-west2 --project=box-prod-skynet-europe-west2 --quiet
{noformat}

Run the [cluster validation pipeline|https://jenkins-k8ssre.dev.box.net/job/Cluster%20Automations/job/Cluster%20Validation/job/master/] again

Run the nodepool upgrade commands
EndOfText
read -d '\n' rollback_pr << EndOfText
No rollback possible
EndOfText
#Details
summary="Upgrade cluster apps-europe-west2-prod-01 and nodepools to 1.25.16-gke.1360000"
components="Kubernetes"
type="Change Control"
priority="Critical"
project="PAAS"
parent="PAAS-15158"

#fields
read -d '\n' deployment_plan << EndOfText
Run the [cluster validation pipeline|https://jenkins-k8ssre.dev.box.net/job/Cluster%20Automations/job/Cluster%20Validation/job/master/]
Run the update command for the cluster
{noformat}gcloud container clusters upgrade apps-europe-west2-prod-01 --cluster-version=1.25.16-gke.1360000 --master --region=europe-west2 --project=box-prod-skynet-europe-west2 --quiet
{noformat}

Run the [cluster validation pipeline|https://jenkins-k8ssre.dev.box.net/job/Cluster%20Automations/job/Cluster%20Validation/job/master/] again

Run the nodepool upgrade commands

read -d '\n' validation_steps << EndOfText
Check the cluster version
{noformat}kubectl version{noformat}
Check nodes
{noformat}kubectl get no | grep -v 1.25.16-gke.1360000{noformat}
Check the [cluster cluster validation|https://jenkins-k8ssre.dev.box.net/job/Cluster%20Automations/job/Cluster%20Validation/job/master/]
EndOfText
#Details
summary="Upgrade cluster apps-europe-west2-prod-01 and nodepools to 1.25.16-gke.1360000"
components="Kubernetes"
type="Change Control"
priority="Critical"
project="PAAS"
parent="PAAS-15158"

#fields
read -d '\n' deployment_plan << EndOfText
Run the [cluster validation pipeline|https://jenkins-k8ssre.dev.box.net/job/Cluster%20Automations/job/Cluster%20Validation/job/master/]
Run the update command for the cluster
{noformat}gcloud container clusters upgrade apps-europe-west2-prod-01 --cluster-version=1.25.16-gke.1360000 --master --region=europe-west2 --project=box-prod-skynet-europe-west2 --quiet
{noformat}

Run the [cluster validation pipeline|https://jenkins-k8ssre.dev.box.net/job/Cluster%20Automations/job/Cluster%20Validation/job/master/] again

Run the nodepool upgrade commands
EndOfText

systems_affected="apps-europe-west2-prod-01"
services_changed="kubernetes"
allow_overlap="Yes"
change_pipeline="Other"
automation_status="Partially Automated"

#Dates
deployment_start="2024-02-22T10:00:00.000-0800"
deployment_end="2024-02-22T17:00:00.000-0800"

#People
reporter="sbobadilla"
asignee="sbobadilla"
director="jlavine"
vp="gtaylor"
manager="rogeryao"
